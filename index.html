<!DOCTYPE html>
<p
<button type="submit">Confirm Booking</button>

</form>

<button class="map-btn" onclick="openMap()">üìç Pickup Location Map</button>

</div>

<footer>
Contact: 7478578232 / 9564681311 | smartjatra@gmail.com
</footer>

<script>
/* date restriction 1 week */
const today = new Date();
const maxDate = new Date();
maxDate.setDate(today.getDate()+7);

document.getElementById("date").min = today.toISOString().split("T")[0];
document.getElementById("date").max = maxDate.toISOString().split("T")[0];

document.getElementById("bookingForm").addEventListener("submit",function(e){
e.preventDefault();

const name=document.getElementById("name").value;
const dest=document.getElementById("destination").value;
const dist=parseFloat(document.getElementById("distance").value);
const pass=document.getElementById("passengers").value;
const mob=document.getElementById("mobile").value;
const date=document.getElementById("date").value;
const time=document.getElementById("time").value;
const txn=document.getElementById("txn").value;

/* distance check */
if(dist<4.5){
alert("‚ùå Only trips above 4.5 KM allowed for advance booking");
return;
}

if(!confirm("Distance 4.5 KM ‡¶è‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶ï‡¶ø?")){
return;
}

/* location */
navigator.geolocation.getCurrentPosition(function(pos){

const lat=pos.coords.latitude;
const lon=pos.coords.longitude;

let msg =
`SMART JATRA BOOKING\n
Name: ${name}
Mobile: ${mob}
Destination: ${dest}
Passengers: ${pass}
Date: ${date}
Time: ${time}
Distance: ${dist} KM
Transaction ID: ${txn}
Location: https://maps.google.com/?q=${lat},${lon}

Note: Customer confirmed distance > 4.5 KM`;

let whatsapp = "https://wa.me/917478578232?text=" + encodeURIComponent(msg);
let mail = "mailto:smartjatra@gmail.com?subject=New Booking&body=" + encodeURIComponent(msg);

window.open(whatsapp,"_blank");
window.location.href = mail;

alert("Booking Sent Successfully!");

});

});

/* pickup map */
function openMap(){
window.open("https://maps.google.com/?q=Smart+Jatra+Durgapur");
}
</script>

</body>

</html>


